{% extends "page.html" %}

{% load staticfiles tags %}

{% block title %}- Apps Library{% endblock %}

{% block styles %}
  {{ block.super }}
  <link href="{% static 'tethys_apps/css/app_library.css' %}" rel="stylesheet" />
  <style>
    body {
      background: {{ site_globals.background_color|default:'#efefef' }};
    }
    .tethys-secondary-header .secondary-title-wrapper .secondary-title {
      color: {{ site_globals.primary_text_color|default:'#ffffff' }};
    }
  </style>
{% endblock %}

{% block primary_content %}
  <div class="tethys-secondary-header narrow clearfix" style="background-color: {{ site_globals.secondary_color|default:'#1b95dc' }};">
    <div class="secondary-title-wrapper">
      <span class="secondary-title">{% if site_globals.apps_library_title %}{{ site_globals.apps_library_title }}{% else %}Apps Library{% endif %}</span>
    <h7 style="color:red; align:center;">Planned Maintenance. HydroShare will be offline Friday February 17 from 8 am to 11 am Eastern US Standard time for system wide storage maintenance at the RENCI data center. We apologize for any inconvenience.</h7>
    </div>
  </div>
  <div class="app-library-wrapper clearfix">
    {% if apps %}
        <div class="container" align="center">
          <div class="row">
            <div class="col-sm-12 col-xs-12">
                <div class="filter-container isotopeFilters">
                    <ul class="list-inline filter">

              {% if  apps|get_tags_from_apps %}
                  <li><a href="#" data-filter="*" class="tag-button active" >All </a></li>
                    {% for tag in apps|get_tags_from_apps%}
                        {% if tag %}
                        <li><a href="#" data-filter=".{{ tag }}" class="tag-button">{{ tag }}</a></li>
                        {% endif %}
                    {% endfor %}
              {% endif %}
                    </ul>
                </div>
                </div>
            </div>
          </div>
      <div id="app-list" class="isotopeContainer">
        {% for app in apps %}
          {% if app.show_in_apps_library and app.enabled %}
          <a class="app-container isotopeSelector {{ app|get_tag_class }}" href="javascript:void(0);" onclick="TETHYS_APPS_LIBRARY.launch_app(this, '{% url app.index %}');" data-app-theme-color="{{ app.color }}">
            <div class="app-icon">
              <img {% if app.icon %}src="{% static app.icon %}"{% else %}src="{% static 'tethys_apps/images/default_app_icon.gif' %}"{% endif %} />
            </div>
            <div class="app-title" data-app-theme-color="{{ app.color }}">
              <span>{{ app.name }}</span>
            </div>
            <div class="color-effect" data-app-theme-color="{{ app.color }}"></div>
            <div class="app-help-icon">
                <span class="glyphicon glyphicon-info-sign" aria-hidden="true"></span>
            </div>
            <div class="app-help-info hidden">
                <p>{% if app.description %}{{ app.description }}{% else %}{% endif %}</p>
            </div>
            <div class="app-help-close hidden">X</div>
          </a>
          {% endif %}
        {% endfor %}
      </div>
    {% else %}
      <h2 class="no-apps-loaded-message">There are no apps loaded.</h2>
    {% endif %}
  </div>
  <div id="app-library-curtain"></div>
{% endblock %}

{% block scripts %}
  {{ block.super }}
  <script src="{% static 'tethys_apps/vendor/imagesloaded.min.js' %}" type="text/javascript"></script>
  <script src="{% static 'tethys_apps/vendor/masonry.min.js' %}" type="text/javascript"></script>
  <script src="{% static 'tethys_apps/js/app_library.js' %}" type="text/javascript"></script>
  <script src="{% static 'tethys_apps/js/isotope.pkgd.min.js' %}" type="text/javascript"></script>
{% endblock %}